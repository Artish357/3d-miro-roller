import"./style.a87c9e06.js";async function s(){miro.board.ui.on("icon:click",async()=>{await miro.board.ui.openPanel({url:"miro.html"})}),miro.board.events.on("roll-result",async e=>{let a=String(e);a.length>80&&(a="..."+a.slice(-75)),await miro.board.notifications.showInfo(a)}),miro.board.ui.on("custom:roll-formula-tag",async({items:e})=>{const a=e.flatMap(l=>l.tagIds),c=await miro.board.get({type:"tag",id:a}),o=e[0].content.replaceAll("&#43;","+").replaceAll("&#45;","-"),[t,r,i]=[...o.matchAll(/([+-]?\d+)/g)].map(l=>l[0]).map(l=>parseFloat(l)).concat([0,0,0]),n=c.map(l=>l.title.replaceAll("X",`${t}`).replaceAll("+X",`+${t}`).replaceAll("-X",`-${t}`).replaceAll("Y",`${r}`).replaceAll("+Y",`+${r}`).replaceAll("-Y",`-${r}`).replaceAll("Z",`${i}`).replaceAll("+Z",`+${i}`).replaceAll("-Z",`-${i}`)).slice(0,1);console.log("formulas",n,o),miro.board.ui.openPanel({url:`miro.html?r=${Math.random()}`,data:{formulas:n,description:o}})}),await miro.board.experimental.action.register({event:"roll-formula-tag",ui:{label:{en:"Roll the attached tag formula"},icon:"cube"},scope:"local",predicate:{$where:"this.tagIds && this.tagIds.length > 0"},contexts:{item:{}}}),miro.board.events.on("roll-result",async e=>{let a=String(e);a.length>80&&(a="..."+a.slice(-75)),await miro.board.notifications.showInfo(a)})}s();
